<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Reggae+One&display=swap" rel="stylesheet">
  
  <style>
    :root {
      --unit: calc(1vh + 2.5vw);
      --border: 0.4vh;
      --font: clamp(0.9em, 1.5vw, 1.2em);
      --col1: #FBFFE4;
      --col2: #A3D1C6;
      --col3: #B3D8A8;
      --col4: #3D8D7A;
      
    }
    
    body {
      user-select: none;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: linear-gradient(190deg, var(--col1), var(--col1));
      height: 100vh;
      color: var(--col1);
      width: 100vw;
      overflow: hidden;
      font-size: var(--unit);
      
      
      
      font-family: "Reggae One", system-ui;
      font-weight: 400;
      font-style: normal;
      
      
      
      
      
      
    }
    
    
    
    
    
    span {
      font-size: var(--unit);
      font-weight: bold;
      display: inline-flex;
      justify-content: center;
      align-items: center;
      position: fixed;
      top: 0%;
      height: 5%;
      width: 100vw;
      z-index: 1000;
    }
    
    span a {
      text-decoration: none;
      color: var(--col2);
      animation: fusionPulse 2s infinite ease-in-out;
    }
    
    #tabs {
      top: 6%;
      position: fixed;
      display: flexbox;
      z-index: 999;
      margin: 0;
    }
    
    #edit {
      width: 25vw;
      top: 3%;
      right: 1%;
      position: fixed;
      display: inline-flex;
      flex-direction: row;
      color: var(--col4);
      
      & bdi {
        font-size: 30%;
        font-weight: 900;
        padding: 0%;
        margin: 0%;
        display: inline-block;
        text-decoration-line: underline;
      }
      
      & i {
        margin-left: 1%;
        font-size: 50%;
      }
    }
    
    #courseTabs .tab {
      padding: 2% 10%;
    }
    
    .tabs {
      width: 100vw;
      display: flex;
      margin: 0%;
      position: relative;
      justify-content: space-evenly;
      align-items: center;
      text-align: center;
    }
    
    .tab {
      padding: 2% 3%;
      margin: 0%;
      border: 2px solid var(--col4);
      box-sizing: border-box;
      border-radius: 20px;
      background-color: var(--col2);
      color: var(--col4);
      font-weight: bold;
      font-size: 50%;
      transition: background-color 0.3s, color 0.3s;
    }
    
    .tab.active {
      background-color: var(--col4);
      color: var(--col1);
      box-shadow: 0 1% 10px rgba(0, 0, 0, 0.2);
      font-size: 85%;
      border: 3px double var(--col3);
      border-radius: 20px;
    }
    
    
    
    strong:first-child {
      /*animation: fusionPulse 10s infinite ease-in-out;*/
      display: inline;
      width: 90%;
      white-space: wrap;
      /* Needed for transform effects */
      font-size: 150%;
      padding: .5%;
      background: linear-gradient(90deg, var(--col1), var(--col3));
      border-radius: 15px;
    }
    
    strong:nth-child(2) {
      font-size: 150%;
      font-weight: 700;
      display: inline;
      color: var(--col1);
      border-radius: 15px;
      background: linear-gradient(90deg, var(--col4), var(--col3));
      padding: .5%;
      margin: .55%;
    }
    
    strong:nth-child(3) {
      font-size: 130%;
      margin-left: 1%;
    }
    
    em {
      font-style: normal;
      display: inline-block;
      font-weight: 900;
      font-size: 100%;
      box-sizing: border-box;
      border: 1.5px dotted var(--col4);
      background: var(--col2);
      color: var(--col1);
      border-radius: 30px;
      margin: 0%;
      padding: 1%;
    }
    
    em.shake {
      animation: shaking 1s ease-in-out infinite;
    }
    
    @keyframes fusionPulse {
      0% {
        opacity: 0.7;
        transform: scale(1);
        color: var(--col4);
      }
      
      50% {
        opacity: 1;
        transform: scale(1.02);
        color: var(--col4);
      }
      
      100% {
        opacity: 0.7;
        transform: scale(1);
        color: var(--col4);
      }
    }
    
    
    sup {
      margin: 0;
      padding: 0;
    }
    
    hr {
      margin: 0;
      border: none;
      padding: 0;
      height: 50px;
      width: 100%;
      background: var(--col1);
    }
    
    
    footer {
      position: fixed;
      bottom: 0;
      height: 5vh;
      background-color: var(--col4);
      color: var(--col1);
      width: 100%;
      justify-content: center;
      font-size: 50%;
      line-height: 5%;
      display: flex;
      flex-direction: column;
      align-items: center;
      
      & a {
        color: deeppink;
        text-decoration: none;
        -webkit-text-stroke: .25px pink;
        letter-spacing: 1px;
      }
      
    }
    
    
    
    #studentPromptBox {
      width: 50vw;
      padding: 1em;
      display: flex;
      flex-direction: column;
      justify-content: center;
      border: 2px solid var(--col4);
      border-radius: 10px;
      background-color: var(--col2);
      margin-top: 6em;
      text-align: center;
      position: relative;
      z-index: 2001;
      font-size: var(--unit);
    }
    
    
    #studentPromptBox select,
    #studentPromptBox button {
      display: inline;
      width: 40vw;
      height: 5vh;
      border: none;
      border-radius: 15px;
      font-size: 70%;
      text-align: center;
      background: var(--col3);
      color: var(--col4);
    }
    
    #studentForm {
      justify-content: center;
    }
    
    .select-container {
      margin: 5%;
      display: flex;
      padding: 5%;
      font-size: 100%;
    }
    
    #studentPromptBox button {
      background-color: var(--col4);
      color: var(--col1);
      padding: 0em;
      border: 2px double var(--col2);
      border-radius: 15px;
      cursor: pointer;
      margin-top: 0em;
      font-size: 70%;
    }
    
    #studentPromptBox button:hover {
      background-color: var(--col3);
    }
    
    
    .table-container {
      position: fixed;
      top: 23%;
      height: 71.5%;
      overflow-x: hidden;
      overflow-y: auto;
      width: 95vw;
      font-size: 50%;
      padding: 0%;
      margin: 0;
      border-radius: 15px;
    }
    
    .timetable-wrapper {
      width: 100%;
      position: relative;
      scroll-behavior: smooth;
    }
    
    #contentArea {
      display: flex;
      width: 600%;
      /* 100% * number of days (6) */
      transition: transform 0.4s ease-in-out;
    }
    
    #contentArea .slide {
      width: calc(95vw * 6);
      flex-shrink: 0;
      display: table-row-group;
      /* Required to keep table row formatting */
      color: var(--col4);
      display: grid;
      
    }
    
    .slide p {
      padding: 0%;
      margin: 0.5% 0 0 1%;
      display: flex;
      flex-direction: column;
      white-space: nowrap;
      width: 90vw;
      border-radius: 15px;
      border: 2px solid var(--col4);
      background: var(--col3);
    }
    
    tr {
      border-radius: 15px;
      width: 95vw;
    }
    
    
    @keyframes contentFadeIn {
      from {
        opacity: 0;
      }
      
      to {
        opacity: 1;
      }
    }
    
    /* Add this class for applying the animation */
    #contentArea.content-animate {
      animation: contentFadeIn 0.4s ease-out;
    }
    
    @keyframes shaking {
      0% {
        transform: none;
      }
      
      10% {
        transform: rotate(10deg) scale(1.05);
      }
      
      20% {
        transform: rotate(-10deg) scale(1.05);
      }
      
      30% {
        transform: rotate(10deg) scale(1.05);
      }
      
      40% {
        transform: rotate(-10deg) scale(1.05);
      }
      
      50% {
        transform: rotate(10deg) scale(1.05);
      }
      
      60% {
        transform: none;
      }
    }
  </style>
</head>

<body>
  <div id="studentPromptBox">
    <form id="studentForm">
      <H4> CLASS ROUTINE FOR DAY DEPARTMENT &#128221;</H4>
      <div class="select-container">
        <label for="semesterSelect" hidden></label>
        <select id="semesterSelect" required>
          <option value="" hidden>Select Semister</option>
          <option value="1">1st</option>
          <option value="2">2nd</option>
          <option value="3">3rd</option>
          <option value="4">4th</option>
          <option value="5">5th</option>
          <option value="6">6th</option>
          <option value="7">7th</option>
          <option value="8">8th</option>
        </select>
      </div>
      
      <div class="select-container">
        <label for="departmentSelect" hidden></label>
        <select id="departmentSelect" required>
          <option value="" hidden>Select Stream</option>
          <option value="bcom">B.Com. (DAY)</option>
          <option value="ba">B.A.</option>
          <option value="bsc">B.Sc.</option>
        </select>
      </div>
      
      <button type="submit">Save Student Info &#8505;</button>
    </form>
  </div>
  
  <span><a href="https://bccrishra.ac.in/"><i class="fas fa-external-link-alt"></i> <!-- For outbound URL -->BIDHAN CHANDRA COLLEGE</a></span>
  <div id="edit">
    <bdi>hiuffu </bdi><i class="fa-solid fa-user-pen"></i>
    <!--<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M12.3 2.3l9.4 9.4-2.6 2.6-9.4-9.4 2.6-2.6zm-2.6 2.6L2 14.6V22h7.4l7.7-7.7-9.4-9.4z" fill="black" />
    </svg>-->
  </div>
  <div id="tabs">
    
    <!-- Course Tabs -->
    <div class="tabs hidden" id="courseTabs">
      <div class="tab" data-course="bcom">B.Com.</div>
      <div class="tab" data-course="ba">B.A.</div>
      <div class="tab" data-course="bsc">B.Sc.</div>
    </div>
    
    <!-- Semester Tabs -->
    <div class="tabs hidden" id="semesterTabs">
      <div class="tab" data-semester="1st">1st</div>
      <div class="tab" data-semester="2nd">2nd</div>
      <div class="tab" data-semester="3rd">3rd</div>
      <div class="tab" data-semester="4th">4th</div>
      <div class="tab" data-semester="5th">5th</div>
      <div class="tab" data-semester="6th">6th</div>
      <div class="tab" data-semester="7th">7th</div>
      <div class="tab" data-semester="8th">8th</div>
    </div>
    
    <!-- Day Tabs -->
    <div class="tabs hidden" id="dayTabs">
      <div class="tab" data-day="mon">MON</div>
      <div class="tab" data-day="tue">TUE</div>
      <div class="tab" data-day="wed">WED</div>
      <div class="tab" data-day="thu">THU</div>
      <div class="tab" data-day="fri">FRI</div>
      <div class="tab" data-day="sat">SAT</div>
    </div>
  </div>
  <!-- Table Content -->
  <div class="table-container hidden">
    <div class="timetable-wrapper">
      <table id="contentArea">
        <tbody class="slide" id="mon-content"> </tbody>
        <tbody class="slide" id="tue-content"> </tbody>
        <tbody class="slide" id="wed-content"> </tbody>
        <tbody class="slide" id="thu-content"> </tbody>
        <tbody class="slide" id="fri-content"> </tbody>
        <tbody class="slide" id="sat-content"> </tbody>
      </table>
    </div>
  </div>
  <footer>
    <p> Version 5.25.0 </p>
    <a href="https://www.instagram.com/shbmpp/"><i class="fa-brands fa-instagram"></i> shbmpp</a>
  </footer>
  
  <script>
    // Sc.hedule data
    const teacher_names = {
      BCOM: { // 1
        ENG: { AKP: "Asis Kumar Pan", PKB: "Prabir Kanti Basu", SS: "Sunandita Sarker", SPS: "Saptaparna Saha", AS: "Abir Sen" },
        CVAC: { SS: "Soumya Saha", AK: "Abdul Khaleque", AKS: "Anjay Kumar Singh", DM: "Debtanu Majee", KR: "Kamal Roy", ADM: "Anindita Mitra", AM: "Amit Mahato", BR: "Bhanumati Ray" },
        ECO: { TM: "Tusher Mukherjee", AG: "Apala Ghosh", SRB: "Shawil Roy Basu" },
        COM: { SG: "Subhajit Ghosh", RKS: "Radha Kanta Sarkar", MD: "Mahadev De", DM: "Debarbata Mukherjee", PD: "Pinaki Dutta" },
        MTH: { SC: "Sucheta Chakrobarty", PK: "Puja Koley" },
        BNG: { SM: "Sukanta Mukhapadhyay", PC: "Piyali Chakraborty" },
        IT: { AJR: "Apurba Jyoti Roy" },
        HIN: { AKS: "Anjay Kumar Singh" }
      },
      BSC: { // 3
        CMS: { UM: "Unmesh Mandal", SKP: "Sovan Kumar Panda", AJR: "Apurba Jyoti Roy", GD: "Goutam Das", RS: "Rimpi Saha" },
        ECO: { SRB: "Shawil Roy Basu", TM: "Tusher Mukherjee", AG: "Apala Ghosh" },
        ELT: { SKP: "Sovan Kumar Panda", AK: "Abdul Khaleque", SS: "Soumya Saha" },
        MTH: { RK: "Ramesh Kar", MS: "Md. Saifuddin", SC: "Sucheta Chakraborty", PK: "Puja Koley" },
        PHS: { SS: "Soumya Saha", AK: "Abdul Khaleque", MKS: "Masud Karim Sarkar" },
        ENG: { AKP: "Asis Kumar Pan", PKB: "Prabir Kanti Basu", SS: "Sunandita Sarker", SPS: "Saptaparna Saha", AS: "Abir Sen" },
        CVAC: { SS: "Soumya Saha", AK: "Abdul Khaleque", AKS: "Anjay Kumar Singh", DM: "Debtanu Majee", KR: "Kamal Roy", ADM: "Anindita Mitra", AM: "Amit Mahato", BR: "Bhanumati Ray" }
      },
      BA: { // 2
        BGN: { TM: "Tanusree Mandal", NM: "Nagen Murmu", SM: "Sukanta Mukhopadhyay", PC: "Piyali Chakraborty", ASD: "Arpita Sil Dey" },
        EDC: { SS: "Sanjay Sarkar", SNS: "Sunita Shaw", SN: "Sima Nandy", GG: "Gargi Ganguly" },
        ENG: { AKP: "Asis Kumar Pan", PKB: "Prabir Kanti Basu", SS: "Sunandita Sarker", SPS: "Saptaparna Saha", AS: "Abir Sen" },
        GEO: { LCP: "Lakshman Chandra Pal", AS: "Arghya Saha", PB: "Pabitra Bhattacharya" },
        HIN: { AKS: "Anjay Kumar Singh" },
        HIS: { SMB: "Samindra Mohan Biswas", MD: "Mitali Dey", HB: "Haimanti Banarjee", EK: "Epsita Khan" },
        PHI: { MC: "Madhushree Chatterjee", BR: "Bhanumati Ray", MD: "Manisha Das" },
        PLS: { DD: "Debdas Dey", DM: "Debtanu Majee", PKS: "Prashant Kumar Sharma", KR: "Kamal Roy", ADM: "Anindita Mitra" },
        SAN: { CM: "Chinmoy Mishra", AM: "Amit Mahato", ASR: "Arpita Singha Roy" }
      }
    };
    
    
    // Subject names database
    const subject_names = {
      BCOM: {
        TF: ['', " - FOUR YEAR", " - THREE YEAR"],
        CC: ["", "FINANCIAL ACCOUNTING I", "COST ACCOUNTING I", ["", "COST ACCOUNTING II", "DIRECT TAX I"],
          ["", "FINANCIAL ACCOUNTING II", "DIRECT TAX II & E-FILLING", "BUSINESS COMMUNICATION", "BUSINESS REGULATORY"],
          ["", "FINANCIAL MANAGEMENT", "ACCOUNTING THEORY", "CORPORATE ACCOUNTING", "COMPANY LAW"],
          ["", "INDIRECT TAX", "AUDITING & ASSURANCE", "BUSINESS MATHEMATICS", "INDIAN FINANCIAL SYSTEM"], "", ""
        ],
        MN: ["", "PRINCIPLES AND PRACTICE OF MANAGEMENT", "BUSINESS MANAGEMENT (HRM)", "CONSUMER BEHAVIOUR", "SALES MANAGEMENT",
          ["", "PRODUCT & PRICING MANAGEMENT", "MARKETING COMMUNICATION"],
          ["", "RETAIL MANAGEMENT & SERVICES MARKETING", "RURAL & INTERNATIONAL MARKETING"]
        ],
        SEC: ["", "ENTREPRENEURSHIP DEVELOPMENT", "INFORMATION TECHNOLOGY", "COMPUTERIZED ACCOUNTING"],
        IDC: ["", "MICROECONOMICS", "MACROECONOMICS", "INDIAN ECONOMICS"],
        AEC: ["", "COMPULSORY ENGLISH", "COMPULSORY ENGLISH", ["ALTERNATIVE ENGLISH", "(AEC) - BENGALI", "(AEC) - HINDI"],
          ["ALTERNATIVE ENGLISH", "(AEC) - BENGALI", "(AEC) - HINDI"]
        ],
        CVAC: ["", ["", "CONSTITUTIONAL VALUE & FUNDAMENTAL DUTIES", "FUNDAMENTALS OF ENVIRONMENT"],
          ["", "INDIAN KNOWLEDGE SYSTEM", "ENVIRONMENTAL EDUCATION"]
        ]
      },
      BA: {
        HIS: {
          NAME: "HISTORY",
          DSCC: " - FOUR YEAR",
          CC: " - THREE YEAR",
          MN: " - MINOR",
          SEC: " - (SEC)",
          IDC: " - (IDC)",
          
        },
        GEO: {
          NAME: "GEOGRAPHY",
          DSCC: " - FOUR YEAR",
          CC: " - THREE YEAR",
          MN: " - MINOR",
          SEC: " - (SEC)",
          IDC: " - (IDC)",
          
        },
        PHI: {
          NAME: "PHILOSOPHY",
          DSCC: " - FOUR YEAR",
          CC: " - THREE YEAR",
          MN: " - MINOR",
          SEC: " - (SEC)",
          IDC: " - (IDC)",
          
        },
        ENG: {
          NAME: "ENGLISH",
          DSCC: " - FOUR YEAR",
          CC: " - THREE YEAR",
          MN: " - MINOR",
          SEC: " - (SEC)",
          IDC: " - (IDC)",
          
        },
        PLS: {
          NAME: "POLITICAL SCIENCE",
          DSCC: " - FOUR YEAR",
          CC: " - THREE YEAR",
          MN: " - MINOR",
          SEC: " - (SEC)",
          IDC: " - (IDC)",
          
        },
        BGN: {
          NAME: "BENGALI",
          DSCC: " - FOUR YEAR",
          CC: " - THREE YEAR",
          MN: " - MINOR",
          SEC: " - (SEC)",
          IDC: " - (IDC)",
          
        },
        EDC: {
          NAME: "EDUCATION",
          DSCC: " - FOUR YEAR",
          CC: " - THREE YEAR",
          MN: " - MINOR",
          SEC: " - (SEC)",
          IDC: " - (IDC)",
          
        },
        SAN: {
          NAME: "SANSKRIT",
          DSCC: " - FOUR YEAR",
          CC: " - THREE YEAR",
          MN: " - MINOR",
          SEC: " - (SEC)",
          IDC: " - (IDC)",
          
        },
        
        AEC: ["", "COMPULSORY ENGLISH", "COMPULSORY ENGLISH", ["ALTERNATIVE ENGLISH", "(AEC) - BENGALI", "(AEC) - HINDI"],
          ["ALTERNATIVE ENGLISH", "(AEC) - BENGALI", "(AEC) - HINDI"]
        ],
        CVAC: ["", ["", "CONSTITUTIONAL VALUE & FUNDAMENTAL DUTIES", "FUNDAMENTALS OF ENVIRONMENT"],
          ["", "INDIAN KNOWLEDGE SYSTEM", "ENVIRONMENTAL EDUCATION"]
        ]
      },
      BSC: {
        PHS: {
          NAME: "PHYSICS",
          DSCC: " - FOUR YEAR",
          CC: " - THREE YEAR",
          MN: " - MINOR",
          SEC: " - (SEC)",
          IDC: " - (IDC)",
          
        },
        CMS: {
          NAME: "COMPUTER SCIENCE",
          DSCC: " - FOUR YEAR",
          CC: " - THREE YEAR",
          MN: " - MINOR",
          SEC: " - (SEC)",
          IDC: " - (IDC)",
          
        },
        MTH: {
          NAME: "MATHEMATICS",
          DSCC: " - FOUR YEAR",
          CC: " - THREE YEAR",
          MN: " - MINOR",
          SEC: " - (SEC)",
          IDC: " - (IDC)",
          
        },
        ELT: {
          NAME: "ELECTRONICS",
          DSCC: " - FOUR YEAR",
          CC: " - THREE YEAR",
          MN: " - MINOR",
          SEC: " - (SEC)",
          IDC: " - (IDC)",
          
        },
        ECO: {
          NAME: "ECONOMICS",
          DSCC: " - FOUR YEAR",
          CC: " - THREE YEAR",
          MN: " - MINOR",
          SEC: " - (SEC)",
          IDC: " - (IDC)",
          
        },
        
        AEC: ["", "COMPULSORY ENGLISH", "COMPULSORY ENGLISH", ["ALTERNATIVE ENGLISH", "(AEC) - BENGALI", "(AEC) - HINDI"],
          ["ALTERNATIVE ENGLISH", "(AEC) - BENGALI", "(AEC) - HINDI"]
        ],
        CVAC: ["", ["", "CONSTITUTIONAL VALUE & FUNDAMENTAL DUTIES", "FUNDAMENTALS OF ENVIRONMENT"],
          ["", "INDIAN KNOWLEDGE SYSTEM", "ENVIRONMENTAL EDUCATION"]
        ]
      }
    };
    
    function getSubjectName(code) {
      const codeStr = String(code).padStart(5, '0');
      const [sem, dept, year, subj, index] = codeStr.split('').map(Number);
      const departments = { 1: 'BCOM', 2: 'BA', 3: 'BSC' };
      const department = subject_names[departments[dept]];
      if (!department) return 'Invalid department';
      if (dept === 1) {
        const groups = ['TF', 'CC', 'MN', 'SEC', 'IDC', 'AEC', 'CVAC'];
        const groupKey = groups[subj] || 'CC';
        let item = department[groupKey]?.[sem];
        const icons = [`<i class="fa-solid fa-coins"></i>`, `<i class="fa-solid fa-scale-unbalanced-flip"></i>`, `<i class="fa-solid fa-chalkboard"></i>`, `<i class="fa-solid fa-hand-holding-dollar"></i>`, `<i class="fa-solid fa-language"></i>`, `<i class="fa-solid fa-earth-asia"></i>`];
        const icon = icons[subj - 1] || `<i class="fa-solid fa-coins"></i>`;
        if (item === undefined) item = 'B.Com. ';
        if (Array.isArray(item)) item = item[index || 0] || item[0] || '';
        if (sem > 4) {
          const yearSuffix = year === 1 ? 'HONOURS' : year === 2 ? 'GENERAL' : '';
          return `${icon} ${item}${yearSuffix}`.trim();
        } else {
          const yearSuffix = year === 1 ? department['TF'][1] : year === 2 ? department['TF'][2] : '';
          return `${icon} ${item}${yearSuffix}`.trim();
        }
      } else {
        const keys = Object.keys(department);
        const icons = [
          [`<i class="fa-solid fa-landmark-dome"></i>`, `<i class="fa-solid fa-map-location-dot"></i>`, `<i class="fa-solid fa-book-journal-whills"></i>`, `<i class="fa-solid fa-earth-asia"></i>`, `<i class="fa-solid fa-landmark-flag"></i>`, `<i class="fa-solid fa-hands-praying"></i>`, `<i class="fa-solid fa-graduation-cap"></i>`, `<i class="fa-solid fa-om"></i>`, `<i class="fa-solid fa-language"></i>`, `<i class="fa-solid fa-yin-yang"></i>`],
          [`<i class="fa-solid fa-atom"></i>`, `<i class="fa-solid fa-computer"></i>`, `<i class="fa-solid fa-square-root-variable"></i>`, `<i class="fa-solid fa-microchip"></i>`, `<i class="fa-solid fa-chart-line"></i>`, `<i class="fa-solid fa-language"></i>`, `<i class="fa-solid fa-yin-yang"></i>`]
        ];
        if ((dept === 2 && [9, 8].includes(subj)) || (dept === 3 && [6, 5].includes(subj))) {
          let groupKey = '';
          if (dept === 2) groupKey = subj === 8 ? 'AEC' : 'CVAC';
          if (dept === 3) groupKey = subj === 5 ? 'AEC' : 'CVAC';
          let item = department[groupKey]?.[sem];
          if (item === undefined) return 'Course not found';
          
          const icon = icons[dept - 2][subj] || `<i class="fa-solid fa-book-open"></i>`;
          if (Array.isArray(item)) item = item[index] || item[0] || '';
          if (year === 0) return `${icon} ${item}`;
          if (sem > 4) {
            const yearType = year === 1 ? 'HONOURS' : (year === 2 ? 'GENERAL' : '');
            return `${icon} ${item} - ${yearType}`.trim();
          } else {
            const yearType = year === 1 ? 'FOUR YEAR' : 'THREE YEAR';
            return `${icon}  ${item} - ${yearType}`.trim();
          }
        } else {
          const subjectKeys = keys.filter(k => k.length === 3);
          const subject = department[subjectKeys[subj]];
          if (!subject?.NAME) return 'HINDI';
          const icon = icons[dept - 2][subj] || `<i class="fa-solid fa-book-open"></i>`;
          const papers = ['DSCC', 'CC', 'MN', 'SEC', 'IDC'];
          const paper = papers[index - 1];
          if (sem < 5) {
            return `${icon} ${subject.NAME}${subject[paper] || ''}`.trim();
          } else {
            const papers6 = ['MN', 'SEC', 'IDC'];
            const paper6 = papers6[index - 3];
            const yearType = year === 1 ? '- HONOURS' : (year === 2 ? '- GENERAL' : '');
            return `${icon} ${subject.NAME} ${subject[paper6] || ''} ${yearType || ''}`.trim();
          }
        }
      }
    }
    
    
    function getTeacherName(code) {
      const departments = ["BCOM", "BA", "BSC"];
      const codeStr = code.toString();
      const deptIndex = parseInt(codeStr[0]) - 1;
      const subjectIndex = parseInt(codeStr[1]) - 1;
      const teacherIndex = parseInt(codeStr[2]) - 1;
      
      const deptKey = departments[deptIndex];
      const department = teacher_names[deptKey];
      if (!department) return '';
      
      const subjectKeys = Object.keys(department);
      const subjectKey = subjectKeys[subjectIndex];
      const subject = department[subjectKey];
      if (!subject) return '';
      
      const teacherNames = Object.values(subject);
      return teacherNames[teacherIndex] || '';
    }
    
    
    const ROOM = {
      00: '',
      ...Object.fromEntries([...Array(7).keys()].map(i => [i + 1, `NEW BUILDING-${i+1}`])),
      19: "ROOM-9",
      10: "ROOM-10",
      14: "ROOM-14",
      15: "ROOM-15",
      16: "ROOM-16",
      17: "ROOM-17",
      20: "ROOM-20",
      21: "ROOM-21A",
      22: "ROOM-21B",
      23: "ROOM-23",
      25: "ROOM-25",
      ...Object.fromEntries([...Array(15).keys()].map(i => [i + 27, `ROOM-${i+27}`])),
      ...Object.fromEntries([...Array(5).keys()].map(i => [i + 41, `VIDYASAGAR HALL-${i+1}`])),
      ...Object.fromEntries([...Array(2).keys()].map(i => [i + 51, `COMPUTER LAB-${i+1}`]))
    };
    
    let scheduleData = {};
    let tableData = {};
    fetch("https://raw.githubusercontent.com/shbmpp/college/refs/heads/main/bccr_classes.json")
    //fetch("./bccr_classes.json")
      .then(response => response.json())
      .then(data => {
        scheduleData = data; // ✅ Store in variable
        tableData = processScheduleData(prefix_adder(scheduleData));
        updateContent();
      })
      .catch(error => {
        console.error("Error fetching stations:", error);
      });
    
    
    
    function prefix_adder(schedule) {
      const result = {};
      const streamMap = { bcom: 1, ba: 2, bsc: 3 };
      const semesterMap = { "1st": 1, "2nd": 2, "3rd": 3, "4th": 4, "5th": 5, "6th": 6, "7th": 7, "8th": 8 };
      
      for (const [semester, streams] of Object.entries(schedule)) {
        const semDigit = semesterMap[semester];
        result[semester] = {};
        
        for (const [stream, days] of Object.entries(streams)) {
          const streamDigit = streamMap[stream];
          result[semester][stream] = {};
          
          for (const [day, periods] of Object.entries(days)) {
            result[semester][stream][day] = periods.map(period => {
              if (!period.trim()) return "";
              
              // Split multiple codes by space
              const codes = period.split(' ');
              const transformedCodes = codes.map(code => {
                // Extract first 3 digits
                const first3 = code.slice(0, 3);
                // Extract middle 2 digits
                const middle2 = code.slice(3, 5);
                // Extract last 2 digits
                const last2 = code.slice(5, 7);
                
                // Combine: semDigit + streamDigit + first3 (total 5 digits)
                // Then streamDigit + middle2 (total 3 digits)
                // Then last2 (2 digits)
                return `${semDigit}${streamDigit}${first3}${streamDigit}${middle2}${last2}`;
              });
              
              return transformedCodes.join(' ');
            });
          }
        }
      }
      return result;
    }
    
    
    const slots = [
      "10AM—11AM", "11AM—12PM", "12PM—1PM", "1PM—2PM", "2PM—3PM", "3PM—4PM", "4PM—5PM"
    ];
    
    function processScheduleData(transformedData) {
      const result = {};
      
      // First pass: process all data normally
      for (const [semester, streams] of Object.entries(transformedData)) {
        result[semester] = {};
        
        for (const [stream, days] of Object.entries(streams)) {
          result[semester][stream] = {};
          
          for (const [day, periods] of Object.entries(days)) {
            result[semester][stream][day] = periods.map((periodStr, time) => {
              if (!periodStr || typeof periodStr !== 'string' || !periodStr.trim()) return "";
              
              const codes = periodStr.split(' ').filter(code => code.trim().length > 0);
              if (codes.length === 0) return "";
              
              const processedCodes = codes.map(code => {
                if (code.length !== 10) {
                  return `Invalid code: ${code}`;
                }
                
                const subjectCode = code.slice(0, 5);
                const teacherCode = code.slice(5, 8);
                const roomCode = code.slice(8, 10);
                
                const subject = getSubjectName(subjectCode);
                const teacher = getTeacherName(teacherCode) || '';
                const room = ROOM[parseInt(roomCode)];
                const isTeacher = teacher ? '&nbsp&nbsp&nbsp &#128100; ' : '';
                const isRoom = room ? 'at ' : '';
                const timeStamp = (slots[time].split('—')[0]).replace(/(\d+)(AM|PM)/i, '$1 $2');
                
                return `<p><strong>${subject}</strong> <strong>${isTeacher}${teacher}</strong><strong>${isRoom}${room} on <em> &#x23F0; ${timeStamp}</em></strong></p>`;
              });
              
              return processedCodes.join('');
            });
          }
        }
      }
      
      // Second pass: handle special cases
      for (const [semester, streams] of Object.entries(transformedData)) {
        for (const [stream, days] of Object.entries(streams)) {
          for (const [day, periods] of Object.entries(days)) {
            periods.forEach((periodStr, time) => {
              if (!periodStr || typeof periodStr !== 'string' || !periodStr.trim()) return;
              
              const codes = periodStr.split(' ').filter(code => code.trim().length > 0);
              if (codes.length === 0) return;
              
              codes.forEach(code => {
                if (code.length !== 10) return;
                
                const subjectCode = code.slice(0, 5);
                const teacherCode = code.slice(5, 8);
                const roomCode = code.slice(8, 10);
                
                const subject = getSubjectName(subjectCode);
                const teacher = getTeacherName(teacherCode) || '';
                const room = ROOM[parseInt(roomCode)];
                const isTeacher = teacher ? '&nbsp&nbsp&nbsp &#128100; ' : '';
                const isRoom = room ? 'at ' : '';
                const timeStamp = (slots[time].split('—')[0]).replace(/(\d+)(AM|PM)/i, '$1 $2');
                
                // Inject special cases into other streams (ba or bsc)
                if (subjectCode[1] === "3" && subjectCode[3] === "4") {
                  if (!result[semester]["ba"]) result[semester]["ba"] = {};
                  if (!result[semester]["ba"][day]) result[semester]["ba"][day] = Array(periods.length).fill("");
                  result[semester]["ba"][day][time] += `<p><strong>${subject}</strong> <strong>${isTeacher}${teacher}</strong><strong>${isRoom}${room} on <em> &#x23F0; ${timeStamp}</em></strong></p>`;
                } else if (subjectCode[1] === "2" && subjectCode[3] === "1") {
                  if (!result[semester]["bsc"]) result[semester]["bsc"] = {};
                  if (!result[semester]["bsc"][day]) result[semester]["bsc"][day] = Array(periods.length).fill("");
                  result[semester]["bsc"][day][time] += `<p><strong>${subject}</strong> <strong>${isTeacher}${teacher}</strong><strong>${isRoom}${room} on <em> &#x23F0; ${timeStamp}</em></strong></p>`;
                }
              });
            });
          }
        }
      }
      return result;
    }
    
    let latestGlowingRow = null;
    
    const semesterTabs = document.querySelectorAll("#semesterTabs .tab");
    const courseTabs = document.querySelectorAll("#courseTabs .tab");
    const dayTabs = document.querySelectorAll("#dayTabs .tab");
    let activeDayTab = undefined;
    
    function setActiveTab(tabs, activeData) {
      if (!tabs || !activeData) return; // যদি tabs বা activeData না থাকে
      tabs.forEach(tab => {
        const { semester, course, day } = tab.dataset || {};
        if (semester === activeData || course === activeData || day === activeData) {
          tab.classList.add("active");
          if (day) activeDayTab = day;
        } else {
          tab.classList.remove("active");
        }
      });
    }
    
    function updateContent(isClickedOnSemOrCourseTabs = false) {
      const student = JSON.parse(localStorage.getItem("student"));
      if (!student) return;
      const activeSemester = document.querySelector("#semesterTabs .tab.active").dataset.semester;
      const activeCourse = document.querySelector("#courseTabs .tab.active").dataset.course;
      const Day = document.querySelector("#dayTabs .tab.active").dataset.day;
      
      const isEmpty = Object.values(scheduleData[activeSemester] || {}).every(dept =>
        Object.values(dept).every(day =>
          Array.isArray(day) && day.length === 7 && day.every(p => p.trim() === "")
        )
      );
      
      const daysData = tableData[activeSemester]?.[activeCourse] || ["", "", "", "", "", ""];
      const contentArea = document.getElementById("contentArea");
      if (isClickedOnSemOrCourseTabs) {
        contentArea.classList.remove('content-animate');
        // Force reflow to ensure the class removal is processed and the animation can be re-triggered
        void contentArea.offsetWidth;
      }
      contentArea.innerHTML = ""; // Clear previous content
      if (!daysData) return;
      
      Object.keys(daysData).forEach(day => {
        const timeData = daysData[day];
        const tbody = document.createElement("tbody");
        tbody.className = "slide";
        tbody.id = `${day}-content`;
        
        if (!timeData || !Array.isArray(timeData) || isEmpty) {
          tbody.innerHTML = `<tr><td style="text-align:center; font-size: 200%; width: 95vw; height: 30vh"> No Classes Scheduled... </td></tr>`;
        } else if (Day !== day) {
          tbody.innerHTML = ''; // `<tr><td style="text-align:center; font-size: 200%;"> </td></tr>`;
        } else {
          let count = 0;
          const validCount = timeData.filter(Boolean).length;
          tbody.innerHTML = timeData
            .map(data => data ? `<tr><td>${data}</td></tr>${++count < validCount ? `<hr>` : ''}` : '')
            .join('');
        }
        
        contentArea.appendChild(tbody);
      });
      if (isClickedOnSemOrCourseTabs) contentArea.classList.add('content-animate');
      highlightCurrentSlot();
    }
    
    const forceToGlow = (row) => {
      if (activeDay !== defaultDay) return;
      if (!row) return;
      const rect = row.getBoundingClientRect();
      const isVisible = rect.top >= window.innerHeight * 0.5 && rect.bottom <= window.innerHeight;
      if (!isVisible) row.scrollIntoView({ behavior: "smooth", block: "center" });
    }
    
    semesterTabs.forEach(tab => {
      tab.addEventListener("click", () => {
        setActiveTab(semesterTabs, tab.dataset.semester);
        updateContent(true);
        forceToGlow(latestGlowingRow);
      });
    });
    
    courseTabs.forEach(tab => {
      tab.addEventListener("click", () => {
        setActiveTab(courseTabs, tab.dataset.course);
        updateContent(true);
        forceToGlow(latestGlowingRow);
      });
    });
    
    dayTabs.forEach(tab => {
      tab.addEventListener("click", () => {
        setActiveTab(dayTabs, tab.dataset.day);
        updateContent();
        forceToGlow(latestGlowingRow);
      });
    });
    
    const currentDay = new Date().toLocaleString("en-us", { weekday: "short" }).toLowerCase();
    const dayMapping = {
      sun: "mon",
      mon: "mon",
      tue: "tue",
      wed: "wed",
      thu: "thu",
      fri: "fri",
      sat: "sat"
    };
    
    const defaultDay = dayMapping[currentDay];
    setActiveTab(dayTabs, defaultDay);
    const activeDay = document.querySelector("#dayTabs .tab.active").dataset.day;
    document.addEventListener('DOMContentLoaded', () => {
      const table = document.querySelector('#contentArea');
      const dayTabs = document.querySelectorAll('#dayTabs .tab');
      const days = ['mon', 'tue', 'wed', 'thu', 'fri', 'sat'];
      const $currentIndex = days.indexOf(defaultDay);
      let currentIndex = days.indexOf(defaultDay);
      let startX = 0;
      
      function updateSlider() {
        const shift = -(currentIndex * 100);
        table.style.transform = `translateX(${shift}%)`;
        highlightDayTab(days[currentIndex]);
        updateContent();
        highlightCurrentSlot();
      }
      
      function highlightDayTab(day) {
        dayTabs.forEach(tab => {
          //tab.classList.toggle('active', tab.dataset.day === day);
          setActiveTab(dayTabs, day);
        });
      }
      
      dayTabs.forEach((tab, index) => {
        tab.addEventListener('click', () => {
          currentIndex = index;
          updateSlider();
        });
      });
      
      table.addEventListener('touchstart', (e) => {
        startX = e.touches[0].clientX;
      }, { passive: true });
      
      table.addEventListener('touchend', (e) => {
        const endX = e.changedTouches[0].clientX;
        const diff = startX - endX;
        
        if (Math.abs(diff) > 75) {
          if (diff > 0 && currentIndex < days.length - 1) {
            currentIndex++;
          } else if (diff < 0 && currentIndex > 0) {
            currentIndex--;
          }
          updateSlider();
        }
      });
      updateSlider();
      updateStudentPromptUI();
    });
    
    
    function isCurrentTimeInSlot(slot) {
      const [startStr, endStr] = slot.split("—").map(s => s.trim().toUpperCase());
      
      const parseTime = (timeStr) => {
        const [hourMin, meridian] = [timeStr.slice(0, -2).trim(), timeStr.slice(-2)];
        let [hour, minute] = hourMin.split(":").map(Number);
        if (isNaN(minute)) minute = 0;
        
        if (meridian === "PM" && hour !== 12) hour += 12;
        if (meridian === "AM" && hour === 12) hour = 0;
        
        const now = new Date();
        return new Date(now.getFullYear(), now.getMonth(), now.getDate(), hour, minute, 0).getTime();
      };
      
      const start = parseTime(startStr);
      const end = parseTime(endStr);
      const now = new Date().getTime();
      
      return now >= start && now <= end;
    }
    
    
    function highlightCurrentSlot() {
      const hasStudent = localStorage.getItem("student");
      if (!hasStudent) return;
      const currentDay = new Date().toLocaleString("en-us", { weekday: "short" }).toLowerCase();
      const activeDay = document.querySelector("#dayTabs .tab.active")?.dataset.day;
      if (currentDay !== activeDay) return;
      
      const activeSemester = document.querySelector("#semesterTabs .tab.active")?.dataset.semester;
      const activeCourse = document.querySelector("#courseTabs .tab.active")?.dataset.course;
      const timeData = tableData[activeSemester]?.[activeCourse]?.[activeDay];
      
      if (!timeData || !Array.isArray(timeData)) return;
      const day = document.getElementById(`${activeDay}-content`);
      
      slots.forEach((slot, index) => {
        const hasData = typeof timeData[index] === "string" && timeData[index].trim();
        
        if (isCurrentTimeInSlot(slot) && hasData) {
          const slotStartTime = slot.split("—")[0]; // e.g., "11AM"
          const slotTimeRegex = new RegExp(`\\b${slotStartTime.replace(/(\d+)(AM|PM)/, '$1 ?$2')}\\b`, 'i');
          
          day.querySelectorAll("p").forEach(p => {
            const text = p.textContent;
            if (slotTimeRegex.test(text)) {
              latestGlowingRow = p;
              const em = p.querySelectorAll("em");
              em.forEach(e => {
                e.classList.add("shake");
              });
              const teacherName = p.querySelectorAll("strong:nth-child(2)");
              teacherName.forEach(e => {
                e.classList.add("high");
              });
            }
          });
        }
      });
    }
    
    
    setInterval(highlightCurrentSlot, 1000); // Update every second to check the time
    function updateStudentPromptUI() {
      const hasStudent = localStorage.getItem("student");
      [...document.querySelectorAll('.hidden')].forEach(el => el.style.display = hasStudent ? 'flex' : 'none');
      document.getElementById("studentPromptBox").style.display = hasStudent ? "none" : "block";
      document.getElementById("edit").style.display = hasStudent ? "block" : "none";
      if (hasStudent) {
        const stdDetails = JSON.parse(localStorage.getItem("student"));
        const sems = Object.fromEntries(
          Array.from({ length: 8 }, (_, i) => {
            const n = i + 1;
            const suffix = `<sup>${['st','nd','rd'][n - 1] || 'th'}</sup>`;
            return [n, `${n}${suffix} SEM`];
          })
        );
        const deptNames = { bcom: 'B.Com.', ba: 'B.A.', bsc: 'B.Sc.' };
        const [semKey, deptKey] = Object.values(stdDetails).slice(0, 2);
        const display = `${sems[semKey]} - ${deptNames[deptKey]}`;
        document.querySelector('#edit bdi').innerHTML = display;
      }
    }
    
    function activateStudentTabs() {
      const student = JSON.parse(localStorage.getItem("student"));
      if (!student) return;
      const suffixMap = ["1st", "2nd", "3rd", "4th", "5th", "6th", "7th", "8th"];
      const semesterLabel = suffixMap[parseInt(student.semester) - 1];
      const departmentKey = student.department.toLowerCase();
      setActiveTab(semesterTabs, semesterLabel);
      setActiveTab(courseTabs, departmentKey);
      setActiveTab(dayTabs, defaultDay);
      updateContent(true);
    }
    
    document.getElementById("studentForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const semester = document.getElementById("semesterSelect").value;
      const dept = document.getElementById("departmentSelect")?.value;
      if (semester && dept) {
        localStorage.setItem("student", JSON.stringify({ semester, department: dept }));
        updateStudentPromptUI();
        activateStudentTabs();
      }
    });
    
    document.getElementById("edit").addEventListener("click", () => {
      localStorage.removeItem("student");
      
      updateStudentPromptUI();
    });
    
    updateStudentPromptUI();
    if (localStorage.getItem("student")) {
      activateStudentTabs();
    }
  </script>
</body>

</html>
